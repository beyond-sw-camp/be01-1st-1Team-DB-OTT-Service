<h1 align="center">OTT Service</h1>


íŒ€ì›
=======
```

íŒ€ì¥: ì „ìŠ¹ë¯¼
íŒ€ì›: ë°•ë¯¼ì„±, ê¹€ì •ë¯¼, ì´ê²½ë¯¼


```







 í”„ë¡œì íŠ¸ ì†Œê°œ
 =============
OTT ì„œë¹„ìŠ¤ì˜ êµ¬ì„±.
OTT ì„œë¹„ìŠ¤ì— ê°€ì…í•œ íšŒì›ë“¤ì˜ ê²°ì œì™€ ì˜í™” ì •ë³´ ê·¸ë¦¬ê³  ì œì¼ ì¤‘ìš”í•œ ì»¨í…ì¸ ì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•œë‹¤.
OTT ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë†’ì€ ì‹œì²­ë¥ ì„ ë³´ìœ í•œ ì»¨í…ì¸ ë“¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ì¶”ê°€í•œë‹¤.




í”„ë¡œì íŠ¸ ë°°ê²½
========
ìš”ì¦˜ì€ TVë¥¼ ì‹œì²­í•˜ëŠ” ê²½ìš°ë³´ë‹¤ OTT ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ ì»¨í…ì¸ ë¥¼ ì‹œì²­í•˜ê±°ë‚˜, ìœ íŠœë¸Œ ë“±ì˜ ë§¤ì²´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ê°€ì‹œê°„ì„ ë³´ë‚´ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ìµœê·¼ OTT ì„œë¹„ìŠ¤ë“¤ì´ ë¹„ì•½ì ìœ¼ë¡œ ë°œì „í•¨ì— ë”°ë¼, ìš°ë¦¬ê°€ ì˜ì“°ê³  ìˆëŠ” ì„œë¹„ìŠ¤ì—ì„œ ìš°ë¦¬ê°€ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë©´ì„œ ì•„ì‰¬ì› ë˜ ë¶€ë¶„ë“¤ì„ ì¶”ê°€í•˜ê³  ì‹¶ì–´ì¡Œë‹¤.




í”„ë¡œì íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ (ìš”êµ¬ì‚¬í•­ ë¶„ì„)
======


>OTT ì„œë¹„ìŠ¤ íšŒì›ì •ë³´
1. ì•„ì´ë””ğŸ”‘
2. ë¹„ë°€ë²ˆí˜¸
3. êµ¬ë…ì—¬ë¶€
     
>ì„ íƒì‚¬í•­
1. ì„ í˜¸í•˜ëŠ” ì»¨í…ì¸  íƒ€ì…
2. ì„ í˜¸í•˜ëŠ” ì¥ë¥´
3. ì„±ë³„
4. ë‚˜ì´
5. êµ­ê°€
    
>ì‹œì²­ì •ë³´
1. ì•„ì´ë””
1. ì˜í™” ì´ë¦„
2. ë§ˆì§€ë§‰ ì‹œì²­ ì§€ì 
3. ì‹œì²­ ì™„ë£Œ ì—¬ë¶€
4. ì»¨í…ì¸  íƒ€ì…

>ê²°ì œì •ë³´
1. ì•„ì´ë””
2. ì´ë¦„
3. ì¹´ë“œë²ˆí˜¸
4. ì¹´ë“œì‚¬
5. íœ´ëŒ€í° ë²ˆí˜¸ğŸ”‘
    
>ì€í–‰
1. íœ´ëŒ€í° ë²ˆí˜¸
2. ì¹´ë“œ ë²ˆí˜¸
3. ê²°ì œ í™•ì¸
4. ì¹´ë“œì‚¬
5. ì´ë¦„

>ì˜í™”
1. ì˜í™” ì´ë¦„
2. ì˜í™” ì¥ë¥´
3. ì˜í™” ê°ë…
4. ì˜í™” ì œì‘ ë‚˜ë¼
5. ì˜í™” í‰ì 
6. ì˜í™” ëŸ¬ë‹íƒ€ì„
7. ì˜í™” ê°œë´‰ì¼
     
>ì‹ ê·œ ì»¨í…ì¸ 
1. ì»¨í…ì¸  íƒ€ì…ğŸ”‘
2. ì¥ë¥´
3. ì»¨í…ì¸  ì—…ë¡œë“œ ë‚ ì§œ
4. ì»¨í…ì¸  ì´ë¦„


>ì‹œì²­ë¥ 
1. ë“œë¼ë§ˆ ì´ë¦„
2. ì œì‘ ë‚˜ë¼
3. êµ­ë‚´ ì‹œì²­ë¥ 
4. í•´ì™¸ ì‹œì²­ë¥ 
5. ë“œë¼ë§ˆ ì¥ë¥´


>íŠ¸ë¦¬ê±°
1. ì•„ì´ë””
2. ì˜í™” ì¥ë¥´


System Architecture
======
```SQL
CREATE TABLE `Payment_info` (
	`Phone_num`	int	NULL,
	`id`	varchar(10)	NULL,
	`name`	varchar(10)	NULL,
	`card_num`	int	NULL,
	`card_cmp`	Varchar(10)	NULL
);

CREATE TABLE `User_info` (
	`id`	varchar(10)	NULL,
	`pwd`	varchar(20)	NULL,
	`sub`	smallint(1)	NOT NULL
);

CREATE TABLE `selected_Options table` (
	`id`	varchar(10)	NULL,
	`preferred_category`	varchar(10)	NULL,
	`preferred_genre`	varchar(10)	NULL,
	`gender`	smallint	NULL,
	`age`	int	NULL,
	`nation`	varchar(5)	NOT NULL
);

CREATE TABLE `Bank` (
	`Phone_num`	int	NULL,
	`card_num`	int	NULL,
	`Field`	smallint	NULL,
	`card_cmp`	varchar(10)	NOT NULL,
	`name`	varchar(10)	NOT NULL
);

CREATE TABLE `Drama rating` (
	`d_name`	varchar(10)	NULL,
	`d_nation`	varchar(10)	NULL,
	`rating`	int	NULL,
	`f_rating`	int	NULL,
	`d_genre`	varchar(10)	NULL
);

CREATE TABLE `New` (
	`c_category`	varchar(10)	NULL,
	`c_genre`	varchar(10)	NULL,
	`c_uploaddate`	date	NULL,
	`c_name`	varchar(10)	NULL
);

CREATE TABLE `record` (
	`id`	varchar(10)	NULL,
	`category`	varchar(10)	NULL,
	`title`	varchar(10)	NULL,
	`latest_point`	int	NULL,
	`hitLastPoint`	smallint	NULL
);

CREATE TABLE `Movie` (
	`m_name`	varchar(10)	NOT NULL	COMMENT 'ì˜í™”ì´ë¦„',
	`m_genre`	varchar(10)	NOT NULL	COMMENT 'ì˜í™” ì¥ë¥´',
	`m_director`	varchar(10)	NOT NULL	COMMENT 'ì˜í™”ê°ë…',
	`m_nation`	varchar(20)	NOT NULL	COMMENT 'ì˜í™” ì œì‘ êµ­ê°€',
	`m_rate`	int	NOT NULL	COMMENT 'ì˜í™” í‰ì ',
	`m_run`	time	NOT NULL	COMMENT 'ì˜í™” ëŸ¬ë‹ íƒ€ì„',
	`m_open`	date	NOT NULL	COMMENT 'ì˜í™” ê°œë´‰ì¼'
);

CREATE TABLE `mov_accu` (
	`p_id`	VARCHAR(10)	NULL,
	`genre`	VARCHAR(10)	NULL
);

ALTER TABLE `Payment_info` ADD CONSTRAINT `PK_PAYMENT_INFO` PRIMARY KEY (
	`Phone_num`,
	`id`
);

ALTER TABLE `User_info` ADD CONSTRAINT `PK_USER_INFO` PRIMARY KEY (
	`id`
);

ALTER TABLE `selected_Options table` ADD CONSTRAINT `PK_SELECTED_OPTIONS TABLE` PRIMARY KEY (
	`id`
);

ALTER TABLE `Bank` ADD CONSTRAINT `PK_BANK` PRIMARY KEY (
	`Phone_num`
);

ALTER TABLE `New` ADD CONSTRAINT `PK_NEW` PRIMARY KEY (
	`c_category`
);

ALTER TABLE `record` ADD CONSTRAINT `PK_RECORD` PRIMARY KEY (
	`id`
);

ALTER TABLE `Payment_info` ADD CONSTRAINT `FK_User_info_TO_Payment_info_1` FOREIGN KEY (
	`id`
)
REFERENCES `User_info` (
	`id`
);

ALTER TABLE `selected_Options table` ADD CONSTRAINT `FK_User_info_TO_selected_Options table_1` FOREIGN KEY (
	`id`
)
REFERENCES `User_info` (
	`id`
);

ALTER TABLE `Bank` ADD CONSTRAINT `FK_Payment_info_TO_Bank_1` FOREIGN KEY (
	`Phone_num`
)
REFERENCES `Payment_info` (
	`Phone_num`
);

ALTER TABLE `record` ADD CONSTRAINT `FK_User_info_TO_record_1` FOREIGN KEY (
	`id`
)
REFERENCES `User_info` (
	`id`
);
```


Trigger ì‘ìš©
=======


```SQL
CREATE or replace TABLE mov_accu
(	
	p_id VARCHAR(10) PRIMARY key,
	genre VARCHAR(10) NOT null
);

DROP TABLE if EXISTS selected_Options;
CREATE TABLE selected_Options (
	id	varchar(10)	NULL,
	preferred_category	varchar(10)	NULL,
	preferred_genre	varchar(10)	NULL,
	gender	varchar(10)	NULL,
	age	int	NULL,
	nation	varchar(5)	NOT NULL
);

INSERT INTO selected_Options VALUES('TDS', 'ì˜í™”',  'ì•¡ì…˜', 'ë‚¨ì', 26, 'í•œêµ­');
DROP TRIGGER if EXISTS TRIGGER_in;

SELECT * FROM selected_Options;
SELECT * FROM mov_accu;

-- -------------------------------------------------insert

delimiter $$
CREATE TRIGGER TRIGGER_in
AFTER INSERT
ON selected_Options
FOR EACH ROW -- ê° í–‰ì—ì„œ ëª¨ë‘ ì‹¤í–‰
BEGIN
	INSERT INTO mov_accu
		VALUES( new.id, new.preferred_genre );
--	SELECT ì˜í™”ì¥ë¥´, COUNT(*) 'CG' FROM  mov_accu
--		GROUP BY ì˜í™”ì¥ë¥´
--		HAVING CG DESC ; 
END $$
delimiter ;

-- ---------------------------------------------- delete

delimiter $$
CREATE TRIGGER TRIGGER_del
AFTER DELETE 
ON selected_Options
FOR EACH ROW -- ê° í–‰ì—ì„œ ëª¨ë‘ ì‹¤í–‰
BEGIN
   DELETE FROM mov_accu WHERE p_id = OLD.id;
END $$
delimiter ;

SELECT * FROM selected_Options;
SELECT * FROM mov_accu;
INSERT INTO selected_Options VALUES('TDS', 'ì˜í™”',  'ì•¡ì…˜', 'ë‚¨ì', 26, 'í•œêµ­');
DELETE FROM selected_Options WHERE id = 'TWC';

-- ----------------------------------------------------- update

DROP TRIGGER if EXISTS trigger_upd;
delimiter $$

CREATE TRIGGER trigger_upd
AFTER UPDATE
ON selected_Options
FOR EACH ROW
BEGIN
    -- ì‹¤í–‰ êµ¬ë¬¸
    UPDATE mov_accu
    SET genre = NEW.preferred_genre
    WHERE p_id = NEW.id;
END $$

delimiter ;



SELECT * FROM selected_Options;
SELECT * FROM mov_accu;
UPDATE selected_Options SET preferred_genre = 'ë¡œë§¨ìŠ¤' WHERE id = 'TDS'; 
```

Entity-Relationship Diagram
============



![OTTERD](https://github.com/beyond-sw-camp/be01-1st-1Team-DB-OTT-Service/assets/125641153/6ac56896-4833-42c9-b499-831d942f119d)





Entity-Relationship model
===========



![ER fixfix](https://github.com/beyond-sw-camp/be01-1st-1Team-DB-OTT-Service/assets/125641153/afe832e1-01be-4ca8-b9ab-0ed9333a801f)





(ì´ˆê¸° êµ¬ìƒ)
==========
<img src="https://github.com/beyond-sw-camp/be01-1st-1Team-DB-OTT-Service/assets/125641153/646ba48c-387c-478d-960a-b4ccd8a57a6e " width="33%" height="33%" />
<img src="https://github.com/beyond-sw-camp/be01-1st-1Team-DB-OTT-Service/assets/125641153/ab0e5d24-449a-4df2-bc24-84375c48c035" width="33%" height="33%" />
<img src="https://github.com/beyond-sw-camp/be01-1st-1Team-DB-OTT-Service/assets/125641153/e3f34367-d528-4255-b2c4-7e2f12ee988a" width="33%" height="33%" />

>>ì²˜ìŒ DBë¥¼ ì´ìš©í•œ í”„ë¡œì íŠ¸ë¥¼ êµ¬ìƒí•˜ë©´ì„œ OTTì„œë¹„ìŠ¤ì˜ ì»¨í…ì¸  ì¶”ì²œ ì‹œìŠ¤í…œì„ êµ¬ìƒí–ˆê³  êµ¬í˜„í•˜ë ¤ ì‹œë„í–ˆë‹¤.
ì—¬ëŸ¬ ê°œì˜ ì•„ì´ë””ì–´ëŠ” ì„ íƒì— ë„ì›€ì„ ì¤¬ë‹¤. í•˜ì§€ë§Œ ì›í•˜ëŠ” ê¸°ëŠ¥ì˜ ì¶”ê°€ë¡œ ì¸í•˜ì—¬ ì ì  ì²˜ìŒê³¼ëŠ” ë©€ì–´ì§€ê²Œ ë˜ëŠ” ê²½í—˜ì„ í–ˆë‹¤.
ì´ˆê¸° ì„ íƒê³¼ ë„ˆë¬´ ë©€ì–´ì§„ í”„ë¡œì íŠ¸ ë‚´ìš©ì„ ë°”ë¡œ ì¡ê³ ì OTT ì„œë¹„ìŠ¤ì˜ íšŒì›ì„ ê¸°ì¤€ìœ¼ë¡œ í•œ ê¸°ë³¸ì ì¸ ê¸°ëŠ¥ìœ¼ë¡œ ì„ íƒì„ ê³ ì •ì‹œì¼°ë‹¤.





